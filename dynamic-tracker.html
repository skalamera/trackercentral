updateAchievementLevelsSubject() {
try {
// Get the district name directly from the DOM element
const districtNameField = document.getElementById('districtName');
const districtName = districtNameField ? districtNameField.value || '' : '';

// VIP with ASTERISK FORMAT instead of brackets
let vipPrefix = '';
if (this.ticketData && this.ticketData.isVip) {
vipPrefix = 'VIP* ';
}

// Format the subject line
const subject = `${vipPrefix}${districtName} | Custom Achievement Levels`;

// Update the subject field directly in the DOM
const formattedSubjectField = document.getElementById('formattedSubject');
if (formattedSubjectField) {
formattedSubjectField.value = subject;

// Also update the hidden subject field if it exists
const subjectField = document.getElementById('subject');
if (subjectField) {
subjectField.value = subject;
}

// Store the generated subject for future reference
this._cachedSubjectLine = subject;
}

console.log('Updated Achievement Levels subject with VIP status:', subject);
} catch (error) {
console.log('Error parsing stored data:', error);
}
}